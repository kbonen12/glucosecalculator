<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Glucose Infusion Rate Calculator</title>
  <style>
    :root {
      --bg-gradient: linear-gradient(135deg, #0f172a, #1e293b);
      --card-bg: #ffffff;
      --accent: #2563eb;
      --accent-soft: #dbeafe;
      --text-main: #0f172a;
      --text-muted: #6b7280;
      --border-soft: #e5e7eb;
      --input-green: #dcfce7;
      --output-yellow: #fef9c3;
      --danger: #ef4444;
    }

    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: var(--bg-gradient);
      display: flex;
      justify-content: center;
      padding: 30px;
    }

    .layout {
      width: 100%;
      max-width: 1100px;
      display: grid;
      grid-template-columns: 380px 1fr;
      gap: 24px;
    }

    @media(max-width: 900px) {
      .layout { grid-template-columns: 1fr; }
    }

    .card {
      background: var(--card-bg);
      padding: 24px;
      border-radius: 15px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.25);
      border: 1px solid rgba(255,255,255,0.1);
    }

    label {
      font-size: 0.85rem;
      font-weight: 700;
      margin-bottom: 3px;
      color: var(--text-main);
    }

    .input-group {
      margin-bottom: 14px;
      display: flex;
      flex-direction: column;
    }

    .dual {
      display: flex;
      gap: 6px;
    }

    input, select {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border-soft);
      font-size: 0.9rem;
      background-color: var(--input-green);
    }

    select {
      background-color: #eef2ff;
      cursor: pointer;
    }

    .output {
      background-color: var(--output-yellow) !important;
      border-color: rgba(200,170,0,0.5);
    }

    button {
      margin-top: 14px;
      width: 100%;
      padding: 10px;
      border-radius: 25px;
      border: none;
      background: var(--accent);
      font-size: 1rem;
      font-weight: 700;
      color: white;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(37,99,235,0.4);
    }

    button:hover {
      background:#1d4ed8;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid var(--border-soft);
    }

    table thead {
      background: #f9fafb;
      font-weight: 700;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid var(--border-soft);
      font-size: 0.85rem;
      text-align: left;
      white-space: normal;
    }

    table tr:last-child td {
      border-bottom: none;
    }

    h2 {
      margin-top: 0;
    }
  </style>
</head>
<body>

  <div class="layout">

    <!-- LEFT PANEL (CALCULATOR) -->
    <div class="card">

      <h2>Glucose Infusion Rate Calculator</h2>

      <div class="input-group">
        <label>Body Weight</label>
        <div class="dual">
          <input id="weight" type="number" placeholder="0">
          <select id="weightUnit">
            <option value="kg" selected>kg</option>
            <option value="lb">lb</option>
          </select>
        </div>
      </div>

      <div class="input-group">
        <label>Fluid Rate</label>
        <div class="dual">
          <input id="fluidRate" type="number" placeholder="0">
          <select id="fluidRateUnit">
            <option value="mL/hr" selected>mL/hr</option>
            <option value="L/hr">L/hr</option>
          </select>
        </div>
      </div>

      <div class="input-group">
        <label>Glucose Dose Rate (mg/kg/min)</label>
        <input id="doseRate" type="number" placeholder="0">
      </div>

      <div class="input-group">
        <label>Glucose Stock Concentration (%)</label>
        <input id="stockPercent" type="number" placeholder="e.g. 50 for D50W">
      </div>

      <div class="input-group">
        <label>Fluid Volume</label>
        <div class="dual">
          <input id="fluidVolume" type="number" placeholder="0">
          <select id="volumeUnit">
            <option value="mL" selected>mL</option>
            <option value="L">L</option>
          </select>
        </div>
      </div>

      <h3>Results</h3>

      <div class="input-group">
        <label>Desired Glucose Concentration (%)</label>
        <input id="desiredPercent" class="output" readonly>
      </div>

      <div class="input-group">
        <label>Dose to Add (mL)</label>
        <input id="doseToAdd" class="output" readonly>
      </div>

      <button onclick="calculate()">Calculate</button>

    </div>

    <!-- RIGHT PANEL (REFERENCE TABLE) -->
    <div class="card">

      <h2>Holliday–Segar Maintenance Fluids</h2>

      <table>
        <thead>
          <tr>
            <th>Weight Range</th>
            <th>Daily Requirement</th>
            <th>Hourly Rate</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>0–10 kg</td>
            <td>100 mL/kg/day</td>
            <td>4 mL/kg/hr</td>
          </tr>
          <tr>
            <td>11–20 kg</td>
            <td>1000 + 50 mL/kg >10 kg</td>
            <td>40 + 2 mL/kg >10 kg</td>
          </tr>
          <tr>
            <td>>20 kg</td>
            <td>1500 + 20 mL/kg >20 kg</td>
            <td>60 + 1 mL/kg >20 kg</td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>

<script>
function calculate() {
  const fluidRateInput = parseFloat(document.getElementById("fluidRate").value);
  const fluidRateUnit = document.getElementById("fluidRateUnit").value;
  const doseRate = parseFloat(document.getElementById("doseRate").value);
  const weightInput = parseFloat(document.getElementById("weight").value);
  const weightUnit = document.getElementById("weightUnit").value;
  const fluidVolumeInput = parseFloat(document.getElementById("fluidVolume").value);
  const volumeUnit = document.getElementById("volumeUnit").value;
  const stockPercent = parseFloat(document.getElementById("stockPercent").value);

  if ([fluidRateInput, doseRate, weightInput, fluidVolumeInput, stockPercent]
      .some(x => isNaN(x) || x <= 0)) return;

  let fluidRate_mL_hr = fluidRateUnit === "mL/hr" ? fluidRateInput : fluidRateInput * 1000;
  let fluidRate_mL_min = fluidRate_mL_hr / 60;

  let weight_kg = weightUnit === "kg" ? weightInput : weightInput * 0.45359237;
  let fluidVolume_L = volumeUnit === "mL" ? fluidVolumeInput / 1000 : fluidVolumeInput;

  const requiredConc_mg_mL = (doseRate * weight_kg) / fluidRate_mL_min;
  const desiredPercent = requiredConc_mg_mL / 10;

  const stock_mg_mL = stockPercent * 10;
  const doseToAdd_mL = (requiredConc_mg_mL * fluidVolume_L * 1000) / stock_mg_mL;

  document.getElementById("desiredPercent").value = desiredPercent.toFixed(2);
  document.getElementById("doseToAdd").value = doseToAdd_mL.toFixed(2);
}
</script>

</body>
</html>
